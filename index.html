<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>RemoteTail by mylxsw</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">RemoteTail</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/mylxsw/remote-tail" class="btn">View on GitHub</a>
      <a href="https://github.com/mylxsw/remote-tail/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/mylxsw/remote-tail/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="remotetail" class="anchor" href="#remotetail" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>RemoteTail</h1>

<p>RemoteTail是一款支持同步显示多台远程服务器的日志文件内容更新的工具，使用它可以让你同时监控多台服务器中某个（某些）日志文件的变更，将多台服务器的<code>tail -f xxx.log</code>命令的输出合并展示。</p>

<p><img src="https://oayrssjpa.qnssl.com/remote-tail.jpg" alt="logo"></p>

<h2>
<a id="使用场景" class="anchor" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用场景</h2>

<p>假设公司有两台web服务器A和B，由于初期没有专业运维进行配置集中式的日志服务系统，两台服务器上分别部署了两套相同的代码提供web服务，使用nginx作为负载均衡，请求根据设定的策略转发的这两台web服务器上。</p>

<p>AB两台服务器中的项目均将日志写到文件系统的<code>/home/data/logs/laravel.log</code>文件。这种情况下如果我们需要查看web日志是否正常，一般情况下就需要分别登陆两台服务器，然后分别执行<code>tail -f /home/data/logs/laravel.log</code>查看日志文件的最新内容，这在排查问题的时候是非常不方便的。RemoteTail就是为了解决这种问题的，开发人员可以使用它同步显示两台（多台）服务器的日志信息。</p>

<h2>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装</h2>

<p>下载项目<code>bin/</code>下对应的<code>remote-tail-平台</code>可执行文件，将该文件加入到系统的<code>PATH</code>环境变量指定的目录中即可。</p>

<p>比如，Centos下可以放到<code>/usr/local/bin</code>目录。</p>

<pre><code>mv remote-tail-linux /usr/local/bin/remote-tail
</code></pre>

<h2>
<a id="使用方法" class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用方法</h2>

<p>使用前需要宿主机建立与远程主机之间的<a href="http://b.aicode.cc/linux/2015/04/27/Linux%E4%BD%BF%E7%94%A8SSH%E5%85%AC%E9%92%A5%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95.html">ssh公钥免密码登陆</a>。</p>

<pre><code>remote-tail -hosts 'watcher@192.168.1.226,watcher@192.168.1.225' \
-file '/usr/local/openresty/nginx/logs/access.log'
</code></pre>

<p><img src="https://oayrssjpa.qnssl.com/remote-tail-demo.jpg" alt="demo"></p>

<blockquote>
<p>如果服务器sshd监听的非默认端口22，可以使用<code>watcher@192.168.1.226:2222</code>这种方式指定其它端口。</p>
</blockquote>

<h3>
<a id="指定配置文件" class="anchor" href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>指定配置文件</h3>

<p>通过使用<code>-conf</code>参数可以为命令指定读取的配置文件，配置文件为TOML格式，请参考<code>example.toml</code>文件。</p>

<p>配置文件<code>example.toml</code>：</p>

<pre><code># 全局配置,所有的servers中tail_file配置的默认值
tail_file="/data/logs/laravel.log"

# 服务器配置,可以配置多个
# 如果不提供password,则使用当前用户的ssh公钥,建议采用该方式,使用密码方式不安全
# server_name, hostname, user 配置为必选,其它可选
[servers]

[servers.1]
server_name="测试服务器1"
hostname="test1.server.aicode.cc"
user="root"
tail_file="/var/log/messages"
# 指定ssh端口，不指定的情况下使用默认值22
port=2222

[servers.2]
server_name="测试服务器2"
hostname="test2.server.aicode.cc"
user="root"
tail_file="/var/log/messages"

[servers.3]
server_name="测试服务器3"
hostname="test2.server.aicode.cc"
user="demo"
password="123456"
</code></pre>

<p>执行命令：</p>

<pre><code>remote-tail -conf=example.toml
</code></pre>

<h2>
<a id="如何贡献" class="anchor" href="#%E5%A6%82%E4%BD%95%E8%B4%A1%E7%8C%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>如何贡献</h2>

<p>欢迎贡献新的功能以及bug修复，<strong>Fork</strong>项目后修改代码，测试通过后提交<strong>pull request</strong>即可。</p>

<h2>
<a id="问题反馈" class="anchor" href="#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>问题反馈</h2>

<p>你可以在github的issue中提出你的bug或者其它需求，也可以通过以下方式直接联系我。</p>

<ul>
<li>微博：<a href="http://weibo.com/code404">管宜尧</a>
</li>
<li>微信：mylxsw</li>
</ul>

<p><img src="https://oayrssjpa.qnssl.com/join_weixin.jpg" alt="WEIXIN"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/mylxsw/remote-tail">RemoteTail</a> is maintained by <a href="https://github.com/mylxsw">mylxsw</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
